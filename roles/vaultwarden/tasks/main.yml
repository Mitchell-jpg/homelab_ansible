---

- name: make vaultwarden directory
  file:
    dest: /home/mitchell/server/vaultwarden/
    state: directory
    mode: 0600
    modification_time: preserve
    access_time: preserve

- name: make data directory
  file:
    dest: /home/mitchell/server/vaultwarden/
    state: directory
    mode: 0600
    modification_time: preserve
    access_time: preserve

- name: place docker-compose file
  copy:
    src: docker-compose.yaml
    dest: /home/mitchell/server/vaultwarden/docker-compose.yaml

- name: start vaultwarden
  community.docker.docker_compose_v2:
    project_src: /home/mitchell/server/traefik
    state: present
